/* Copyright 2025 Securly, Inc. All rights reserved. */
!function(){globalThis.debuglog={enabled:!1,log:function(t){if(this.enabled)try{console.log(`${performance.timeOrigin+performance.now()} ${t}`)}catch(t){console.error(t)}},dir:function(t){if(this.enabled)try{console.log(`${JSON.stringify(t)}`)}catch(o){console.error(o),console.dir(t)}}};const t=["google.com","google.ad","google.ae","google.com.af","google.com.ag","google.al","google.am","google.co.ao","google.com.ar","google.as","google.at","google.com.au","google.az","google.ba","google.com.bd","google.be","google.bf","google.bg","google.com.bh","google.bi","google.bj","google.com.bn","google.com.bo","google.com.br","google.bs","google.bt","google.co.bw","google.by","google.com.bz","google.ca","google.cd","google.cf","google.cg","google.ch","google.ci","google.co.ck","google.cl","google.cm","google.cn","google.com.co","google.co.cr","google.com.cu","google.cv","google.com.cy","google.cz","google.de","google.dj","google.dk","google.dm","google.com.do","google.dz","google.com.ec","google.ee","google.com.eg","google.es","google.com.et","google.fi","google.com.fj","google.fm","google.fr","googlega","googlege","googlegg","google.comgh","google.comgi","googlegl","googlegm","googlegr","google.comgt","googlegy","google.com.hk","google.hn","google.hr","google.ht","google.hu","google.co.id","google.ie","google.co.il","google.im","google.co.in","google.iq","google.is","google.it","google.je","google.com.jm","google.jo","google.co.jp","google.co.ke","google.com.kh","google.ki","google.kg","google.co.kr","google.com.kw","google.kz","google.la","google.com.lb","google.li","google.lk","google.co.ls","google.lt","google.lu","google.lv","google.com.ly","google.co.ma","google.md","google.me","google.mg","google.mk","google.ml","google.com.mm","google.mn","google.com.mt","google.mu","google.mv","google.mw","google.com.mx","google.com.my","google.co.mz","google.com.na","google.com.ng","google.com.ni","google.ne","google.nl","google.no","google.com.np","google.nr","google.nu","google.co.nz","google.com.om","google.com.pa","google.com.pe","google.com.pg","google.com.ph","google.com.pk","google.pl","google.pn","google.com.pr","google.ps","google.pt","google.com.py","google.com.qa","google.ro","google.ru","google.rw","google.com.sa","google.com.sb","google.sc","google.se","google.com.sg","google.sh","google.si","google.sk","google.com.sl","google.sn","google.so","google.sm","google.sr","google.st","google.com.sv","google.td","google.tg","google.co.th","google.com.tj","google.tl","google.tm","google.tn","google.to","google.com.tr","google.tt","google.com.tw","google.co.tz","google.com.ua","google.co.ug","google.co.uk","google.com.uy","google.co.uz","google.com.vc","google.co.ve","google.co.vi","google.com.vn","google.vu","google.ws","google.rs","google.co.za","google.co.zm","google.co.zw","google.cat"];globalThis.overlay={CHECKTIMEOUT:1e3,clearing:!1,cleared:!1,overlayId:0,overlayCheckFailures:0,_getLocation:function(){return document.location.href},overlayPresent:function(){return null!==document.getElementById("securlyOverlay")},contentHidden:function(){return"hidden"===document.documentElement.style.contentVisibility},setOverlay:function(t){if(overlay.overlayPresent())debuglog.log("overlay already present");else{try{if(document.documentElement.style.contentVisibility="hidden",overlay.overlayId+=1,overlay.overlayCheckFailures=0,overlay.clearing=!1,document.getElementsByTagName("video").length>0){const t=document.getElementsByTagName("video");for(let o=0;o<t.length;o++)t.item(o).pause()}const o=t||new URL(overlay._getLocation()),e=document.createElement("style");e.setAttribute("id","soverlay-style"),e.innerHTML="#securlyOverlay{\n\t\t\t\t\tbackground-color:#fff !important;\n\t\t\t\t\tposition:fixed !important;\n\t\t\t\t\twidth:100% !important;\n\t\t\t\t\theight:100% !important;\n\t\t\t\t\ttop:0px !important;\n\t\t\t\t\tleft:0px !important;\n\t\t\t\t\tz-index:2147483647 !important;\n\t\t\t\t\tmargin:0px !important;\n\t\t\t\t\tpadding:0px !important;\n\t\t\t\t}\n\t\t\t\t#securlyOverlay .securly-center-logo path:nth-child(2) {\n\t\t\t\t\tfill: #171b1f !important;\n\t\t\t\t}\n\t\t\t\t@media (prefers-color-scheme: dark) {\n\t\t\t\t\t#securlyOverlay {\n\t\t\t\t\t\tbackground-color: #101218 !important;\n\t\t\t\t\t}\n\t\t\t\t\t#securlyOverlay .securly-center-logo path:nth-child(2) {\n\t\t\t\t\t\tfill: #bdc1c6 !important;\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t\t.securly-center-logo {\n\t\t\t\t\tdisplay: inline-block !important;\n\t\t\t\t\tposition: absolute !important;\n\t\t\t\t\tmargin: auto !important;\n\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t\ttop: -80px !important;\n\t\t\t\t\tright: 0 !important;\n\t\t\t\t\tbottom: 0 !important;\n\t\t\t\t\tleft: 0 !important;\n\t\t\t\t\tbackground: none !important;\n\t\t\t\t\t// animation: showLogo 1s 1s forwards;\n\t\t\t\t\topacity: 0;\n\t\t\t\t}\n\t\t\t\t.soverlay-loading {\n\t\t\t\t\tdisplay: inline-block !important;\n\t\t\t\t\tposition: absolute !important;\n\t\t\t\t\tmargin: auto !important;\n\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t\ttop: 0 !important;\n\t\t\t\t\tright: 0 !important;\n\t\t\t\t\tbottom: 0 !important;\n\t\t\t\t\tleft: 0 !important;\n\t\t\t\t\twidth: 80px !important;\n\t\t\t\t\theight: 80px !important;\n\t\t\t\t\tanimation: showLogo 1s 1s forwards;\n\t\t\t\t\tbackground: none !important;\n\t\t\t\t\topacity: 0;\n\t\t\t\t}\n\t\t\t\t.soverlay-loading div {\n\t\t\t\t\tposition: absolute !important;\n\t\t\t\t\ttop: 33px !important;\n\t\t\t\t\twidth: 13px !important;\n\t\t\t\t\theight: 13px !important;\n\t\t\t\t\tborder-radius: 50% !important;\n\t\t\t\t\tbackground: #0073E6 !important;\n\t\t\t\t\tmargin: 0 !important;\n\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t\tanimation-timing-function: cubic-bezier(0, 1, 1, 0);\n\t\t\t\t}\n\t\t\t\t.soverlay-loading div:nth-child(1) {\n\t\t\t\t\tleft: 8px;\n\t\t\t\t\tanimation: soverlay-loading1 0.6s infinite;\n\t\t\t\t}\n\t\t\t\t.soverlay-loading div:nth-child(2) {\n\t\t\t\t\tleft: 8px;\n\t\t\t\t\tanimation: soverlay-loading2 0.6s infinite;\n\t\t\t\t}\n\t\t\t\t.soverlay-loading div:nth-child(3) {\n\t\t\t\t\tleft: 32px;\n\t\t\t\t\tanimation: soverlay-loading2 0.6s infinite;\n\t\t\t\t}\n\t\t\t\t.soverlay-loading div:nth-child(4) {\n\t\t\t\t\tleft: 56px;\n\t\t\t\t\tanimation: soverlay-loading3 0.6s infinite;\n\t\t\t\t}\n\t\t\t\t@keyframes soverlay-loading1 {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: scale(0);\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: scale(1);\n\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t@keyframes soverlay-loading3 {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: scale(1);\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: scale(0);\n\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t@keyframes soverlay-loading2 {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: translate(0, 0);\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: translate(24px, 0);\n\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t@keyframes showLogo {\n\t\t\t\t\t0% {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t}\n\t\t\t\t\t}",document.head.appendChild(e);let l=document.createElement("div");l.setAttribute("id","securlyOverlay"),l.setAttribute("class","securly_overlay");let n=document.createElement("div");for(n.setAttribute("class","soverlay-loading"),i=0;i<4;i++)n.appendChild(document.createElement("div"));let g=document.createElement("div");g.setAttribute("class","securly-center"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" viewBox="0 0 1490 389" class="securly-center-logo"><path d="M341.51 89.08c-.61-6.92-5.93-12.49-12.84-13.16-1.81-.19-45.87-4.8-83.36-26.63-37.27-21.7-61.16-43.01-62.16-43.92-5.58-5.1-14.24-5.21-19.71 0-.22.2-23.1 21.02-62.56 44.03-38.4 22.4-82.16 26.43-82.59 26.47-6.9.54-12.47 5.92-13.24 12.8-.29 2.65-1.63 30.62-.9 62.57 1.05 46.4 6.3 72.81 21.18 102.89 8.99 18.18 28.75 43.1 39.1 53.63 13.34 13.57 26.23 23.92 34.66 29.79 6.48 4.51 10.63 6.89 11.75 7.5 3.87 2.14 9.29 2.23 13.81.21 1.05-.46 4.53-2.27 9.81-5.33 4.35-2.52 11.44-6.77 20.49-12.74 4.89-3.23 9.88-6.64 14.81-10.12 23.8-16.82 58.6-45.6 81.41-74.3 21.11-26.56 33.13-55.34 27.66-83.05-3.63-18.4-12.4-31.02-26.85-40.78-13.3-8.99-31.54-12.09-47.17-8-15.08 3.95-25.83 12.57-31.37 18.27-5.75-5.94-26.88-25.18-58.51-18.71-28.71 5.87-55.56 33.58-46.4 79.93 2.76 13.98 9.83 28.88 21.14 43.47 8.22 10.6 18.63 20.99 30.58 31 3.5 2.93 8.38 3.08 12.25.64 3.74-2.36 7.81-5.18 11.77-8.21 1.53-1.17 2.58-2.92 2.73-4.84.18-2.17-.68-4.25-2.33-5.66-14.69-12.56-41.41-36.68-47.21-61.46-6.45-27.58 12.52-42.93 23.99-45.11 11.22-2.13 21.63-.29 31.01 6.39 4.87 3.47 10.18 8.6 13.78 12.3 1.87 1.92 4.43 3 7.11 3a9.87 9.87 0 007.08-2.98c3.33-3.4 7.55-7.75 13.71-12.17 12.83-9.2 30.2-10.29 42.81-1.21 29.19 21.02 6.05 61.54-10.09 80.7-10.64 12.63-26.27 31.34-73.7 66.03-15.46 11.31-28.64 18.57-35.37 22.24-5.47-3.44-15.3-11.62-27.13-23.01-21.81-21-43.9-50.46-50.92-85.93-8.78-44.38-6.41-102.37-6.41-102.37s44.96-6.83 82.34-28.32c26.32-15.14 45.78-30.11 57.77-40.06 0 0 30.09 24.63 56.34 39.85 23.31 13.51 52.75 23.27 83.43 28.54.42 8.62 1.93 62.88-4.14 95.02-8.47 44.88-35.72 83.34-90.96 125.39-18.44 14.04-46.79 32.53-62.59 42.22-3.39 2.08-5.33 6.81-2.69 10.41.44.6 1.55 1.63 2.14 2.07 4.96 3.72 8.36 6.18 11.84 7.97 4.5 2.31 9.41 1.13 12.86-.87 19.59-11.35 37.93-23.73 56.27-37.7 19.12-14.55 41.2-32.58 60.03-55.9 23.68-29.32 37.38-59.64 41.92-88.13 7.7-48.23 3.62-114.66 3.62-114.66z" fill="#0073e6"></path><path d="M416.57 265.94c-3.65-1.83-4.02-4.75-2.19-8.4l9.86-17.16c2.19-3.29 5.11-4.02 8.4-1.83 12.78 8.4 30.31 14.97 51.49 14.97 18.62 0 29.94-6.94 29.94-19.72 0-11.69-8.76-17.53-35.42-24.1-32.87-8.03-59.89-20.81-59.89-50.76 0-30.31 26.29-49.66 65.73-49.66 25.2 0 45.28 6.57 59.52 14.97 3.29 1.83 4.02 4.75 1.83 8.4l-9.13 16.8c-1.83 3.29-4.75 4.02-8.4 1.83-14.24-7.67-28.12-12.05-45.65-12.05-15.7 0-27.02 5.48-27.02 17.89 0 10.96 10.22 15.34 38.71 22.28 35.42 9.13 56.6 21.18 56.6 52.59 0 30.67-26.29 51.49-69.02 51.49-26.28-.02-47.83-6.95-65.36-17.54zm237.78-157.03c-50.76 0-86.18 37.98-86.18 87.28 0 50.03 38.34 87.28 90.56 87.28 31.04 0 50.76-9.49 62.81-18.62 2.92-2.56 3.29-5.48 1.46-8.76l-9.49-15.7c-1.83-3.65-4.75-4.02-8.03-1.46-9.86 6.57-22.64 13.88-42.73 13.88-31.41 0-54.05-19.35-58.43-46.01h124.52c3.65 0 5.84-2.19 6.21-6.21v-5.84c.01-50.42-32.5-85.84-80.7-85.84zm46.01 71.94h-95.68c5.11-25.93 24.47-42.36 50.76-42.36 23.74 0 42.36 16.8 44.92 41.63v.73zm55.87 15.7c0-49.66 39.8-87.64 91.29-87.64 26.66 0 43.09 7.3 54.41 14.61 3.29 2.56 4.02 5.48 1.83 9.13l-9.49 16.43c-1.83 3.29-5.11 3.65-8.4 1.83-8.4-5.11-19.72-8.76-34.33-8.76-34.69 0-58.06 23.01-58.06 54.41 0 30.67 23.37 53.68 56.6 53.68 16.43 0 27.02-3.65 35.79-8.4 3.65-2.19 6.21-1.46 7.67 1.46l9.86 17.53c1.83 3.65 1.1 6.21-2.19 8.4-8.76 5.48-25.2 14.24-53.68 14.24-54.05-.01-91.3-37.98-91.3-86.92zm466.71-80.34l-2.19 23.37c-.36 4.38-2.92 5.84-6.94 5.11-2.56-.73-5.84-1.1-9.49-1.1-31.4 0-47.47 23.37-47.84 47.11v83.26c0 4.02-2.19 6.21-6.21 6.21h-24.1c-3.65 0-6.21-2.19-6.21-6.21V118.41c0-4.02 2.56-6.21 6.21-6.21h18.99c3.65 0 6.21 2.19 6.21 5.84l1.1 27.02c6.94-19.72 27.02-36.15 56.97-36.15 2.56 0 5.48 0 8.03.37 4.01.36 5.84 3.28 5.47 6.93zm29.39 157.76V25.65c0-4.02 2.56-6.21 6.21-6.21h24.1c4.02 0 6.21 2.19 6.21 6.21v248.32c0 4.02-2.19 6.21-6.21 6.21h-24.1c-3.66 0-6.21-2.19-6.21-6.21zm233.69-154.47l-62.08 147.9-33.23 79.24c-1.1 2.92-3.65 4.75-6.94 4.75h-23.74c-4.38 0-6.57-2.92-4.75-6.94l25.93-64.27-69.38-160.68c-1.83-4.38 0-7.3 4.38-7.3h28.12c3.29 0 5.84 1.46 6.94 4.75l49.3 121.6 48.57-121.6c1.1-3.29 3.65-4.75 6.94-4.75h25.56c4.38 0 6.2 2.92 4.38 7.3zm-404-7.31h-24.47c-3.65 0-5.84 2.19-5.84 6.21V198c0 30.38-16.84 50.01-42.36 50.38h-1.59c-25.52-.37-42.36-19.99-42.36-50.38v-79.6c0-4.02-2.19-6.21-5.84-6.21h-24.47c-3.65 0-5.84 2.19-5.84 6.21v86.91c0 43.74 26.56 73.51 65.62 77.65 3.45.48 8.14.78 13.31.78 4.17 0 8.03-.19 11.17-.52 40.44-2.95 68.51-33.11 68.51-77.9V118.4c0-4.02-2.19-6.21-5.84-6.21z"></path></svg>',l.appendChild(g),l.appendChild(n),o.hostname.endsWith("bing.com")?document.body.parentElement.append(l):document.body.prepend(l),document.documentElement.style.contentVisibility=""}catch(t){debuglog.log("overlay error - content remains hidden"),debuglog.dir(t)}var o=overlay.overlayId;setTimeout(()=>{overlay.overlayCheck(o)},overlay.CHECKTIMEOUT)}},clearOverlay:function(){var t=overlay.overlayId;debuglog.log(`overlay clear:${document.location.toString()} ${t}`),document.documentElement.style.contentVisibility="";let o=document.getElementById("securlyOverlay"),e=document.getElementById("soverlay-style");null!==o&&o.remove(),null!==e&&e.remove(),setTimeout(()=>{if(overlay.overlayId!==t)return void debuglog.log(`overlay clear check skipped: current: ${overlay.overlayId} check: ${t}`);document.documentElement.style.contentVisibility="";let o=document.getElementById("securlyOverlay"),e=document.getElementById("soverlay-style");null!==o&&o.remove(),null!==e&&e.remove()},5e3)},filterCheck:function(t){const o=t||overlay._getLocation();chrome.runtime.sendMessage({type:"filter-check",url:o,overlayCheckFailures:overlay.overlayCheckFailures},function(t){t&&"filter-check-ack"===t.type&&(debuglog.log(`overlay check ack:${o}`),debuglog.dir(t))})},overlayCheck:function(t){if(debuglog.log(`overlay check:${document.location.toString()}`),overlay.overlayId!==t)return void debuglog.log(`overlay check skipped: current: ${overlay.overlayId} check: ${t}`);let o=overlay.overlayPresent(),e=overlay.contentHidden();if(!o&&!e)return debuglog.log(`overlay check passed: ${t}`),void(overlay.overlayCheckFailures=0);overlay.overlayCheckFailures+=1,!o&&e?debuglog.log(`overlay check failed: contenthidden ${t} failures: ${overlay.overlayCheckFailures}`):debuglog.log(`overlay check failed: ${t} failures: ${overlay.overlayCheckFailures}`),overlay.filterCheck(),setTimeout(()=>{overlay.overlayCheck(t)},overlay.CHECKTIMEOUT)},onMessage:function(t,o,e){if(t&&"filter-clear"===t.type){let o=overlay.cleared;if(t.url!==overlay._getLocation())return debuglog.log(`overlay clear skipped:${document.location.toString()} ${t.url}`),debuglog.dir(t),e({type:"filter-clear-ack",priorCleared:o,urlMismatch:!0}),!1;overlay.clearOverlay(),debuglog.log(`overlay cleared:${document.location.toString()}`),debuglog.dir(t),e({type:"filter-clear-ack",priorCleared:o}),overlay.cleared=!0}},isMapsParameterChange:function(t,o){try{let e=t.pathname,l=o.pathname;return e.split("@")[0]===l.split("@")[0]}catch(t){return!1}},isImagesParameterChange:function(t,o){try{return t.origin===o.origin&&t.pathname===o.pathname&&t.search===o.search}catch(t){return!1}},onNavigate:function(o){const e=new URL(o.destination.url),l=function(o){const e=o.hostname.replace(/(^www\.)|(^\.)/,"");return t.includes(e)}(e);if(e.hostname.endsWith("youtube.com")||e.hostname.endsWith("bing.com")||l){if(l&&e.pathname.includes("/maps/")){const t=new URL(overlay._getLocation());if(overlay.isMapsParameterChange(t,e))return}if(l&&e.pathname.includes("/search")&&"2"===e.searchParams.get("udm")){const t=new URL(overlay._getLocation());if(overlay.isImagesParameterChange(t,e))return}if(e.toString()===overlay._getLocation()&&"replace"===o.navigationType)return void debuglog.log(`navigation skipped:${e.toString()} ${o.navigationType}`);debuglog.log(`navigating:${e.toString()} ${o.navigationType}`),document.documentElement.style.contentVisibility="hidden",overlay.setOverlay(e),overlay.filterCheck(e.toString()),debuglog.log(`overlay reloaded:${e.toString()}`)}},bingOnSubmit:function(t){debuglog.log("bing submit"),overlay.setOverlay()},bingOnKeydown:function(t){if("Enter"===t.key||"NumpadEnter"===t.key){if(!t.target.matches("header form input[type='search']"))return;debuglog.log(`bing keydown:${t.key}`),overlay.setOverlay()}},checkSpecialHandling:function(){const t=new URL(overlay._getLocation());t.hostname.endsWith("bing.com")&&(debuglog.log(`special handling for bing:${t.toString()}`),document.addEventListener("submit",t=>{overlay.bingOnSubmit(t)},!0),document.addEventListener("keydown",t=>{overlay.bingOnKeydown(t)},!0))},init:function(){globalThis.navigation&&navigation.addEventListener("navigate",t=>{overlay.onNavigate(t)}),document.documentElement.style.contentVisibility="hidden",document.addEventListener("DOMContentLoaded",overlay._domcontentloaded),chrome.runtime.onMessage.addListener(function(t,o,e){return overlay.onMessage(t,o,e)}),overlay.filterCheck(),overlay.checkSpecialHandling(),debuglog.log(`overlay loaded:${document.location.toString()}`)},_domcontentloaded:function(){overlay.cleared||overlay.setOverlay()},_beforeunload:function(){document.documentElement.style.contentVisibility="hidden"},uninit_fortests:function(){document.removeEventListener("DOMContentLoaded",overlay._domcontentloaded),document.removeEventListener("beforeunload",overlay._beforeunload),document.removeEventListener("submit",overlay.bingOnSubmit),document.removeEventListener("keydown",overlay.bingOnKeydown),globalThis.navigation&&navigation.removeEventListener("navigate",overlay.onNavigate),overlay.clearing=!1,overlay.cleared=!1,overlay.overlayId=0,overlay.overlayCheckFailures=0}},overlay.init()}();